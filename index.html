<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø£Ø¬ Ø¢Ø¬Ù…Ø§Ø± â€“ ØµØ§Ù†Ø¹ ØµÙˆØ± Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600;800&display=swap" rel="stylesheet">

<style>
body{
  background:#111;
  color:#fff;
  font-family:'Cairo',sans-serif;
  text-align:center;
}
header{
  background:#1877f2;
  padding:12px;
  font-size:22px;
  font-weight:800;
}
canvas{
  margin-top:10px;
  border-radius:12px;
}
.controls{
  padding:10px;
}
input,textarea,button{
  margin:5px;
  padding:8px;
  border-radius:6px;
  border:none;
  width:90%;
  max-width:400px;
}
button{
  background:#2e7d32;
  color:#fff;
  font-weight:bold;
}
label{
  font-size:13px;
  opacity:0.8;
}
</style>
</head>

<body>

<header>â“• ØµØ§Ù†Ø¹ ØµÙˆØ± Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</header>

<canvas id="c" width="600" height="800"></canvas>

<div class="controls">

  <label>ØµÙˆØ±Ø© Ø§Ù„Ø®Ø¨Ø±</label><br>
  <input type="file" id="bgImg"><br>

  <label>Ø´Ø¹Ø§Ø± Ø§Ù„ØµÙØ­Ø©</label><br>
  <input type="file" id="logoImg"><br>

  <label>Ø§Ø³Ù… Ø§Ù„ØµÙØ­Ø©</label><br>
  <input type="text" id="pageName" value="Ø£Ø¬ Ø¢Ø¬Ù…Ø§Ø±"><br>

  <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø®Ø¨Ø± (Ù‚ØµÙŠØ±)</label><br>
  <input type="text" id="newsTitle" value="Ø§Ù„Ø£Ø®Ø¨Ø§Ø±"><br>

  <label>Ù„ÙˆÙ† Ø´Ø±ÙŠØ· Ø§Ù„Ø®Ø¨Ø±</label><br>
  <input type="color" id="barColor" value="#1b5e20"><br>

  <label>Ù†Øµ Ø§Ù„Ø®Ø¨Ø±</label><br>
  <textarea id="news" rows="3">Ù„Ø§ Ø²ÙŠØ§Ø¯Ø© ÙÙŠ Ø¬Ù…Ø±ÙƒØ© Ø§Ù„Ù‡ÙˆØ§ØªÙ ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ø§Ù„Ø£Ø¯Ù†Ù‰ Ø¥Ù‚Ù„ÙŠÙ…ÙŠØ§</textarea><br>

  <button onclick="exportImage()">ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
<script>
const canvas = new fabric.Canvas('c');

let pageGroup, pageText, fbIcon;
let logoImgObj;
let titleBox, titleText;
let newsBox, newsText;

/* ===== ÙÙŠØ³Ø¨ÙˆÙƒ + Ø§Ø³Ù… Ø§Ù„ØµÙØ­Ø© ===== */
fabric.loadSVGFromURL(
  "https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg",
  (objects, options) => {
    fbIcon = fabric.util.groupSVGElements(objects, options);
    fbIcon.scaleToWidth(16);

    pageText = new fabric.Text("Ø£Ø¬ Ø¢Ø¬Ù…Ø§Ø±",{
      fontSize:22,
      fill:'#ffffff',
      fontWeight:'bold',
      left:22,
      top:0
    });

    pageGroup = new fabric.Group([fbIcon, pageText],{
      left:20,
      top:20
    });

    canvas.add(pageGroup);
  }
);

document.getElementById('pageName').oninput = e=>{
  pageText.text = e.target.value;
  canvas.renderAll();
};

/* ===== ØµÙˆØ±Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© ===== */
document.getElementById('bgImg').onchange = e=>{
  const r=new FileReader();
  r.onload=()=>{
    fabric.Image.fromURL(r.result,img=>{
      img.scaleToWidth(600);
      canvas.setBackgroundImage(img,canvas.renderAll.bind(canvas));
    });
  };
  r.readAsDataURL(e.target.files[0]);
};

/* ===== Ø´Ø¹Ø§Ø± Ø§Ù„ØµÙØ­Ø© ===== */
document.getElementById('logoImg').onchange = e=>{
  const r=new FileReader();
  r.onload=()=>{
    fabric.Image.fromURL(r.result,img=>{
      img.scaleToWidth(60);
      img.set({
        left:520,
        top:20,
        clipPath:new fabric.Circle({
          radius:30,
          originX:'center',
          originY:'center'
        })
      });
      if(logoImgObj) canvas.remove(logoImgObj);
      logoImgObj=img;
      canvas.add(img);
    });
  };
  r.readAsDataURL(e.target.files[0]);
};

/* ===== Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø®Ø¨Ø± ===== */
document.getElementById('newsTitle').oninput = drawNews;
document.getElementById('news').oninput = drawNews;
document.getElementById('barColor').oninput = drawNews;

function drawNews(){
  if(titleBox) canvas.remove(titleBox);
  if(titleText) canvas.remove(titleText);
  if(newsBox) canvas.remove(newsBox);
  if(newsText) canvas.remove(newsText);

  const color = document.getElementById('barColor').value;

  titleBox = new fabric.Rect({
    left:20,
    top:610,
    width:200,
    height:35,
    fill:'#ffffff',
    rx:6,
    ry:6
  });

  titleText = new fabric.Text(
    document.getElementById('newsTitle').value,{
    left:30,
    top:617,
    fontSize:18,
    fill:color,
    fontWeight:'bold'
  });

  newsBox = new fabric.Rect({
    left:0,
    top:650,
    width:600,
    height:130,
    fill:color,
    shadow:'rgba(0,0,0,0.4) 0px -3px 10px'
  });

  newsText = new fabric.Textbox(
    document.getElementById('news').value,{
    left:20,
    top:675,
    width:560,
    fontSize:26,
    fill:'#fff',
    fontWeight:'bold'
  });

  canvas.add(titleBox, titleText, newsBox, newsText);
}

/* ===== ØªØµØ¯ÙŠØ± ===== */
function exportImage(){
  const a=document.createElement('a');
  a.download="news-image.png";
  a.href=canvas.toDataURL({multiplier:2});
  a.click();
}
</script>

</body>
</html>